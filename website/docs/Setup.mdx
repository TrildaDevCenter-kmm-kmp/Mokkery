---
description: How to add Mokkery to your Gradle project rapidly!
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import Admonition from '@theme/Admonition';

# Setup

1. Apply Gradle plugin:

<Tabs
  groupId="kotlinVersion"
  defaultValue="k2"
  values={[
    {label: 'K1', value: 'k1'},
    {label: 'K2', value: 'k2'},
  ]}>
  <TabItem value="k1">
      ```kotlin
      plugins {
          kotlin("multiplatform") version "1.9.24" // ...or any other Kotlin plugin
          id("dev.mokkery") version "1.9.24-1.7.0"
      }
      ```
 </TabItem>
  <TabItem value="k2">
      ```kotlin
      plugins {
          kotlin("multiplatform") version "2.0.0" // ...or any other Kotlin plugin
          id("dev.mokkery") version "2.1.0"
      }
      ```
  </TabItem>
</Tabs>


2. Ensure that your Mokkery version is compatible with Kotlin version. Refer to [compatibility](#compatibility) section.

3. Check [targets](#targets) section to make sure that all targets from you multiplatform project are supported.

4. At this point everything should be fine. In case of Gradle being unable to find dependencies, check missing repositories.
```kotlin
// for runtime dependencies
repositories {
    mavenCentral()
}
```
```kotlin
// for plugin dependencies
pluginManagement {
    repositories {
        gradlePluginPortal()
        mavenCentral()
    }
}
```
### Source sets

By default, Mokkery is applied to all Kotlin source sets in the project whose names contain the word 'Test'
or are equal to "test".

:::warning
Before version 2.1.0, Mokkery was applied by default only to source sets whose names contained the phrase 'Test'.
In result it was not applied in Kotlin JVM projects.
:::

To change the default behavior, you can provide a different rule in your Gradle file:

```kotlin
plugins {
    id("dev.mokkery")
}

mokkery {
    rule.set(ApplicationRule.Listed("jvmTest"))                   // this rule affects only jvmTest
    rule.set(ApplicationRule.MatchesName(Regex("macos.*Test")))   // this rule affects all "macos.*Test" source sets
    rule.set { sourceSet -> sourceSet.name.endsWith("Test") }     // this rule affects all ".*Test" source sets
}
```

### Targets

‚úÖ Supported:
- ‚òï JVM & Android
- üîß [All 3 tiers of Kotlin Native targets](https://kotlinlang.org/docs/native-target-support.html)
- üåê JS (Browser, Node.js)
- üß™ Wasm-JS (Browser, Node.js)
- üß™ Wasm-WASI (Node.js)

You can refer to [this file](https://github.com/lupuuss/Mokkery/blob/master/build-mokkery/src/main/kotlin/mokkery-multiplatform.gradle.kts) for more details.

### Compatibility

<Tabs
  groupId="kotlinVersion"
  defaultValue="k2"
  values={[
    {label: 'K1', value: 'k1'},
    {label: 'K2', value: 'k2'},
  ]}>
  <TabItem value="k1">
      | Mokkery version                  	 | Supported Kotlin version                               | Plugin version           |
      |------------------------------------|--------------------------------------------------------|--------------------------|
      | 1.7.0 	                            | 1.9.24, 1.9.23	                                        | `"$kotlinVersion-1.7.0"` |
      | 1.6.1 	                            | 1.9.23                                                 | `"$kotlinVersion-1.6.1"` |
      | 1.6.0 	                            | 1.9.23                                                 | `"$kotlinVersion-1.6.0"` |
      | 1.5.0 	                            | 1.9.23, 1.9.22	                                        | `"$kotlinVersion-1.5.0"` |
      | 1.4.0 	                            | 1.9.22, 1.9.21, 1.9.20 	                               | `"$kotlinVersion-1.4.0"` |
      | 1.3.2 	                            | 1.9.22, 1.9.21, 1.9.20  	                              | `"$kotlinVersion-1.3.2"` |
      | 1.3.1 	                            | 1.9.22, 1.9.21, 1.9.20                                 | `"$kotlinVersion-1.3.1"` |
      | 1.3.0 	                            | 1.9.20, 1.9.10, 1.9.0, 1.8.22, 1.8.21, 1.8.20        	 | `"$kotlinVersion-1.3.0"` |
      | 1.2.0 	                            | 1.9.0, 1.8.22, 1.8.21, 1.8.20 	                        | `"$kotlinVersion-1.2.0"` |
      | 1.1.0 	                            | 1.9.0, 1.8.22, 1.8.21, 1.8.20 	                        | `"$kotlinVersion-1.1.0"` |
      | 1.0.1 	                            | 1.9.0, 1.8.22, 1.8.21, 1.8.20 	                        | `"$kotlinVersion-1.0.1"` |
  </TabItem>
  <TabItem value="k2">
      <Admonition type="warning">
          Mokkery 2.* versions aren't tied to specific Kotlin 2.* versions, assuming the compiler API will stay stable.
          However, breaking changes can cause compile-time errors that require updating Mokkery.
          Track compiler API stability [here](https://youtrack.jetbrains.com/issue/KT-49508/Stabilize-the-K2-Compiler-Plugin-API).
      </Admonition>
      | Mokkery version                  	 | Supported Kotlin versions                            |
      |------------------------------------|--------------------------------------------------------|
      | 2.1.0 	                            | 2.0.0+	                                            |
      | 2.0.0 	                            | 2.0.0+	                                            |
  </TabItem>
</Tabs>
